---
layout: post
title: 写下这个数
date:   2016-09-24
categories: C
tags: [blog]  
summary: PAT乙级题库的第二题
image: /image/PAT.png
---
好久没有碰PAT了，我感觉甲级的题目分明已经不能上手，所以选了乙级的题库来做，无奈我太弱，连乙级的题目AC都要AC半天……好了言归正传，这个题是昨天做的，感觉还是有一定代表性的，题目如下：

读入一个自然数n，计算其各位数字之和，用汉语拼音写出和的每一位数字。

输入格式：每个测试输入包含1个测试用例，即给出自然数n的值。这里保证n小于10^100。

输出格式：在一行内输出n的各位数字之和的每一位，拼音数字间有1 空格，但一行中最后一个拼音数字后没有空格。

输入样例：
1234567890987654321123456789
输出样例：
yi san wu

我先说一下自己的解题思路吧：1.定义一个int n,然后用连除（n%10,n/10)的方法求出n的每一位数，存入一个数组中；2.数组元素求和；3.求和后的元素再按1的方法求出和的每一位数字，再对应输出相应的拼音，这里我原来用的是switch语句，即每一个拼音对应一个case(现在看来真是智商捉急啊囧……）

因为n最高位数有可能是100，所以我在写程序的时候，1和2都是在一个for循环里面进行100次的（还是智商捉急……），但很快提交的时候就出现了段错误……仔细想想，这个n有可能不是100位啊，任意位的都可以的，那当不是100位的时候数组元素求和也是100次，肯定是不能计算的……所以我的思路肯定是错的了。

下面提供一个参考答案，我觉得思路是很清晰的：

{% highlight ruby %}
 #include<stdio.h>
 #include <stdlib.h> 
 #include <string.h>
void printf_num(int num)
{
  int zonghe[10];
  char *name[] ={"ling","yi","er","san","si","wu","liu","qi","ba","jiu","shi"};
  int i=0;
  for(i=0;num>=10;i++){
    zonghe[i]=num%10;
    num=num/10;
  }
  zonghe[i++]=num;
  while(i--){
    if(i!=0){
      printf("%s ",name[zonghe[i]]);
    }else{
    printf("%s\n",name[zonghe[i]]);
    }
  }
}

int main(){
  char n[100];
  char *p=n;
  int sum=0;
  int i=0;

  scanf("%s",n);

  while(*p!='\0'){
    sum = sum + (*p - '0');  //（*p - '0'）将字符型数字转化为整型数字
    p++;
  }
  printf_num(sum);
  return 0;
}
{% endhighlight%}

首先，因为这个数字有可能很大，很多位，所以不应该用整形来定义了，要知道C里面，如果是32位系统的话，那么int的范围最多是-2147483648～2147483647，对于这题显然是不够用的，所以要采用字符串来处理了，这里比较明智的是采用了指针遍历字符串，当没有遍历到字符串结束时，将每一位字符转化为数字，然后累加（这是一个通用的做法，我觉得还是应当记住的）。

至于输出和的每一位的拼音，就是可以采用我思路中的方法，求出每一位的值然后放进一个数组中，然后再倒过来遍历输出每一位的拼音，这里又用到了指针，不同的是用的是字符串指针数组，因为如果是char定义的数组，那么数组元素只能是单个的字符，所以为了输出像拼音那样的字符串，用到了字符串指针（通用做法，牢记）。

总结：1.多位数求其各位数用字符串处理好；2.输出字符串数组要用到字符串指针（完）





